<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@3.4.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <title>Web Design Mastery | WDM&Co</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <nav>
      <div class="nav__logo">BC Camping</div>
      <ul class="nav__links">
        <li class="link"><a href="#">Home</a></li>
        <li class="link"><a href="#">Book</a></li>
        <li class="link"><a href="#">Blog</a></li>
        <li class="link"><a href="#">Contact Us</a></li>
      </ul>
    </nav>
    </header>

    <section class="section__container popular__container">
      <h2 class="section__header">Available Campgrounds</h2>
      <div class="popular__grid"></div>
    </section>

    <div class="loading-overlay">
      <div class="loading-image"></div>
      <div class="loading-text">Loading...</div>
    </div>
    

    <footer class="footer">
      <div class="section__container footer__container">
        <div class="footer__col">
          <h3>WDM&Co</h3>
          <p>
            WDM&Co is a premier hotel booking website that offers a seamless and
            convenient way to find and book accommodations worldwide.
          </p>
          <p>
            With a user-friendly interface and a vast selection of hotels,
            WDM&Co aims to provide a stress-free experience for travelers
            seeking the perfect stay.
          </p>
        </div>
        <div class="footer__col">
          <h4>Company</h4>
          <p>About Us</p>
          <p>Our Team</p>
          <p>Blog</p>
          <p>Book</p>
          <p>Contact Us</p>
        </div>
        <div class="footer__col">
          <h4>Legal</h4>
          <p>FAQs</p>
          <p>Terms & Conditions</p>
          <p>Privacy Policy</p>
        </div>
        <div class="footer__col">
          <h4>Resources</h4>
          <p>Social Media</p>
          <p>Help Center</p>
          <p>Partnerships</p>
        </div>
      </div>
      <div class="footer__bar">
        certified j1mmr production
      </div>
    </footer>
  </body>
</html>


<script>
  $(document).ready(function() {
    var urlParams = new URLSearchParams(window.location.search);
    var address = urlParams.get('address');
    var startDate = urlParams.get('start-date');
    var endDate = urlParams.get('end-date');
  
    // Construct the request payload
    var requestData = {
      address: address,
      start_date: startDate,
      end_date: endDate
    };
  
    // Show loading screen
    var loadingOverlay = $("<div>").addClass("loading-overlay");
    var loadingText = $("<div>").addClass("loading-text").text("Loading...");
    loadingOverlay.append(loadingText);
    $("body").append(loadingOverlay);
  
    // Make the API call with POST method and headers
    $.ajax({
      url: "https://bc-camping.azurewebsites.net/api/backend1?code=7DOL_9TvoDAdNGqBUAoizSb-TgWpUtTJcBn_a65rGdayAzFuum601A==",
      type: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer your-token"
      },
      data: JSON.stringify(requestData),
      success: function(data) {
        var popularContainer = $(".popular__grid"); // Get the container for popular cards
  
        // Iterate over the campsite data and create HTML elements
        for (var i = 0; i < data.length; i++) {
          var campsite = data[i];
          var campsiteName = campsite[0];
          var campsiteDistance = campsite[1];
          var campsiteImage = campsite[2]; // Assuming the API also provides an image URL for each campsite
  
          // Create the 'popular__card' element
          var popularCard = $("<div>").addClass("popular__card");
          var cardImage = $("<img>").attr("src", campsiteImage).attr("alt", "popular hotel");
          var cardContent = $("<div>").addClass("popular__content");
          var cardHeader = $("<div>").addClass("popular__card__header");
          var headerTitle = $("<h4>").text(campsiteName);
          var headerDistance = $("<p>").text("Campground Distance: " + campsiteDistance + " minutes away");
  
          // Append the elements to the 'popular__card'
          cardHeader.append(headerTitle);
          cardContent.append(cardHeader);
          cardContent.append(headerDistance);
          popularCard.append(cardImage);
          popularCard.append(cardContent);
  
          // Append the 'popular__card' to the container
          popularContainer.append(popularCard);
        }
  
        // Hide loading screen
        loadingOverlay.remove();
      },
      error: function(xhr, status, error) {
        // Handle error response
        console.error(error);
  
        // Hide loading screen
        loadingOverlay.remove();
      }
    });
  });
  </script>
  